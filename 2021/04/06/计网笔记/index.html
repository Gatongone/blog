<!DOCTYPE html>
<html lang="ch">

<head>
    <meta charset="UTF-8">
    <meta name="Author" content="Gatongone">
    <meta name="Description" content="Gatongone's Blog">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon"  href="/images/NeonGame_L.ico">
    <link rel="icon" type="image/x-icon"  href="/images/NeonGame_M.ico">
    <link rel="icon" type="image/x-icon"  href="/images/NeonGame_S.ico">
    <style>
        body
        {
            background-color: rgb(20, 20, 34);
            -ms-overflow-style: none; /* IE 10+ */
            scrollbar-width: none; /* Firefox */
            overflow-x: hidden;
            height: 100%;
        }
        body::-webkit-scrollbar
        {
            display: auto; /* Chrome Safari */
            width: 0px;
        }
    </style>
<meta name="generator" content="Hexo 5.3.0"></head>

    <body>
        
<link rel="stylesheet" href="/blog/css/leftsidebar.css">

<div class="leftpanel_out" id="leftpanel_out">
    <div class="block1"></div>

    <div class="profile_background" id="profile_background">
        <a href="/blog/" target="_self">
            <img class="profile" src="/blog/images/profile.jpg" />
        </a>
    </div>

    <img class="block2" src="/blog/images/block.png"/>

    <div class="buttons">
        <a>
           
        </a>
        <a target="_blank" rel="noopener" href="https://space.bilibili.com/26209665" title="bilibili">
            <img class="shadowfilter bilibili" src="/blog/images/icon/bilibili_btn.png"/>
        </a>
         <a>
           
        </a>
        <a target="_blank" rel="noopener" href="https://gatongone.lofter.com/" title="lofter">
            <img class="shadowfilter lofter" src="/blog/images/icon/lofter_btn.png"/>
        </a>
         <a>
           
        </a>
         <a target="_blank" rel="noopener" href="https://github.com/Gatongone/" title="github">
            <img class="shadowfilter github" src="/blog/images/icon/github_btn.png"/>
        </a>
         <a>
           
        </a>
        <a target="_blank" rel="noopener" href="https://blog.csdn.net/Gatongone" title="CSDN">
            <img class="shadowfilter csdn" src="/blog/images/icon/csdn_btn.png"/>
        </a>
    </div>
    <div class="block3"></div>
</div>
<script>
    // var obj=document.getElementById('leftpanel_out');
    // MoveBar(obj,"leftpanel_in",1150)
</script>                       <!-- 加载侧边栏 -->

        <div class='body-wrapper' id="body-wrapper">

            <head>
 <link rel="icon" type="image/x-icon"  href="/images/NeonGame_L.ico">
 <link rel="icon" type="image/x-icon"  href="/images/NeonGame_M.ico">
 <link rel="icon" type="image/x-icon"  href="/images/NeonGame_S.ico">
 <link href="https://cdn.bootcss.com/KaTeX/0.7.1/katex.min.css" rel="stylesheet">
 
</head>
<body>
    
<link rel="stylesheet" href="/blog/css/topbar.css">


<script src="/blog/js/searchbar.js"></script>
  
<div class="topbar" id="topbar">
    <div class = "top_left" id="top_left">
    <a href="https://www.gatongone.site" target="_self">
        <img src="/blog/images/NeonGame.png"/>
    </a>
        <font class="title_top" id="title_top" align="left">Gatongone's blog</font>
    </div>
    <div id="topblock">
            <nav>
                <input type="checkbox" id="nav"/><label for="nav" class="check" id="check"></label>
                <ul>
                    <li><a href="#" id='about' class="buttonfont">About</a></li>
                    <li><a href="#" id="plan" class="buttonfont">Planing</a></li>
                    <li><a href="#" id="RSS" class="buttonfont">RSS</a></li>
                </ul>
            </nav>
    </div>
    <div id="search">
        <input id="search_input"  type="text" placeholder="search with title" value="" onkeydown=" if(event.which==13)''">
        <button><img src="/blog/images/icon/search.png" style="height: 16px; width: 18px; margin-top: 2px;"></button>
    </div>
</div>

<!-- swiftype search -->

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','ZLY73zc1DgdsrmGd9LyN','2.0.0');
</script>



<script src="/blog/js/hidebar.js"></script>

    
<link rel="stylesheet" href="/blog/css/mainbody.css">


<!-- 回到首页 -->

    <a href="/blog/">
    <button class="home_btn" >
        <img src="/blog/images/icon/home.png">
    </button>
    </a>


<!-- 回到顶部 -->
<div id="top">
    <button class="top_btn" id="top_btn">
        <img src="/blog/images/icon/top.png">
    </button>
</div>
<!-- 主体 -->

<div class="mainbody" id="mainbody">
<!-- 加载post_entry -->
    <div class="entry">
    

    
<!--    加载post    -->    

    
        <head>
    <title>计网笔记</title>
    <link rel="icon" type="image/x-icon"  href="/images/NeonGame_L.ico">
    <link rel="icon" type="image/x-icon"  href="/images/NeonGame_M.ico">
    <link rel="icon" type="image/x-icon"  href="/images/NeonGame_S.ico">
</head>
<body>

    
<link rel="stylesheet" href="/blog/css/post.css">

    
<link rel="stylesheet" href="/blog/css/hightlight.css">


    
<link rel="stylesheet" href="/blog/css/rightbar.css">

<div id="right_bar">

        

        
            <div id="post_index" class="post_index">
                <span> Post Index </span>
                <div>
                    <div id="clear"></div>
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-text"> 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E7%BD%91%E8%9E%8D%E5%90%88"><span class="toc-text"> 三网融合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#network-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C"><span class="toc-text"> Network 计算机网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#internet-%E4%BA%92%E8%81%94%E7%BD%91"><span class="toc-text"> Internet 互联网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#internetinternetwork-%E4%BA%92%E8%BF%9E%E7%BD%91"><span class="toc-text"> internet(internetwork) 互连网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA"><span class="toc-text"> 主机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84%E5%8F%91%E5%B1%95%E7%9A%84%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5"><span class="toc-text"> 互联网基础架构发展的三个阶段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%90%E4%B8%BA%E4%BA%92%E8%81%94%E7%BD%91%E6%AD%A3%E5%BC%8F%E6%A0%87%E5%87%86%E7%9A%84%E4%B8%89%E4%B8%AA%E9%98%B6%E6%AE%B5"><span class="toc-text"> 成为互联网正式标准的三个阶段：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-text"> 互联网的组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%AF%E7%B3%BB%E7%BB%9F%E4%B8%BB%E6%9C%BA%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-text"> 端系统（主机）间的通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E4%BF%A1%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F"><span class="toc-text"> 通信网络中的交换方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-text"> 路由器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E7%BD%91%E7%BB%9C%E7%9A%84%E4%BD%9C%E7%94%A8%E8%8C%83%E5%9B%B4%E8%BF%9B%E8%A1%8C%E5%88%86%E7%B1%BB"><span class="toc-text"> 按网络的作用范围进行分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-text"> 计算机网络性能指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E5%BB%B6"><span class="toc-text"> 时延</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E5%92%8C%E7%BD%91%E7%BB%9C%E5%B1%82%E6%AC%A1"><span class="toc-text"> 网络协议和网络层次</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93-%E5%8D%8F%E8%AE%AE-%E6%9C%8D%E5%8A%A1%E5%92%8C%E6%9C%8D%E5%8A%A1%E8%AE%BF%E9%97%AE%E7%82%B9"><span class="toc-text"> 实体、协议、服务和服务访问点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-text"> 物理层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text"> 物理层的基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1"><span class="toc-text"> 数据通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-text"> 物理层下面的传输媒体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF"><span class="toc-text"> 信道复用技术</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-text"> 数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%89%E7%A7%8D%E9%97%AE%E9%A2%98"><span class="toc-text"> 数据链路层存在的三种问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E5%AD%97%E7%AC%A6%E5%A1%AB%E5%85%85"><span class="toc-text"> 字节（字符）填充</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%94%E7%89%B9%E5%A1%AB%E5%85%85%E9%9B%B6%E6%AF%94%E7%89%B9%E5%A1%AB%E5%85%85"><span class="toc-text"> 比特填充（零比特填充）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B"><span class="toc-text"> 差错检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%97%E4%BD%99%E7%A0%81%E8%AE%A1%E7%AE%97"><span class="toc-text"> 冗余码计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ppp%E5%8D%8F%E8%AE%AE%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AE"><span class="toc-text"> PPP协议(点对点协议)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E5%9F%9F%E7%BD%91%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-text"> 局域网的数据链路层</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-text"> 网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E7%A7%8D%E8%A7%82%E7%82%B9"><span class="toc-text"> 两种观点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E7%A7%8D%E6%9C%8D%E5%8A%A1"><span class="toc-text"> 两种服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ip%E5%8D%8F%E8%AE%AE"><span class="toc-text"> IP协议</span></a></li></ol></li></ol>
                </div>
                
             </div>
        
             
</div>


    <div class="page_title" id="page_title">
        计网笔记
    </div>
    <hr>
    <div class="page_content">
        
        
        <ul>
<li>
<h2 id="概述"><a class="markdownIt-Anchor" href="#概述"></a> 概述</h2>
<ul>
<li>
<h3 id="三网融合"><a class="markdownIt-Anchor" href="#三网融合"></a> 三网融合</h3>
<ul>
<li>计算机网络</li>
<li>电信网络</li>
<li>游戏电视网络</li>
</ul>
</li>
<li>
<h3 id="network-计算机网络"><a class="markdownIt-Anchor" href="#network-计算机网络"></a> Network 计算机网络</h3>
<p>由若干个<code>结点（node）</code>和连接这些点的<code>链路（link）</code>组成</p>
</li>
<li>
<h3 id="internet-互联网"><a class="markdownIt-Anchor" href="#internet-互联网"></a> Internet 互联网</h3>
<p>特指起源于美国研制的ARPAnet，最大的、覆盖全球的计算机网络</p>
<p>互联网的基本特性:</p>
<ul>
<li>连通性：用户间可以交换信息</li>
<li>共享：资源的共享</li>
</ul>
<p>互联网+：互联网 + 各个传统行业</p>
</li>
<li>
<h3 id="internetinternetwork-互连网"><a class="markdownIt-Anchor" href="#internetinternetwork-互连网"></a> internet(internetwork) 互连网</h3>
<p>通过<code>路由器</code>将各个<code>网络（Network）</code>互连起来的，构成覆盖范围更大的计算机网络</p>
</li>
<li>
<h3 id="主机"><a class="markdownIt-Anchor" href="#主机"></a> 主机</h3>
<p>与<code>互连网（internet）</code>相连的计算机,可以是计算机或者智能手机等</p>
</li>
<li>
<h3 id="互联网基础架构发展的三个阶段"><a class="markdownIt-Anchor" href="#互联网基础架构发展的三个阶段"></a> 互联网基础架构发展的三个阶段</h3>
<ul>
<li>第一阶段：从单个网络ARPANET的向互联网发展过程</li>
<li>第二阶段：形成了三级结构：主干网——地区网——企业网（校园网）</li>
<li>第三阶段：形成了多层次ISP结构的互联网，出现了<code>互联网服务提供者ISP(Internet Service Provider)</code></li>
</ul>
</li>
<li>
<h3 id="成为互联网正式标准的三个阶段"><a class="markdownIt-Anchor" href="#成为互联网正式标准的三个阶段"></a> 成为互联网正式标准的三个阶段：</h3>
<p>所有互联网标准都以RFC的形式在互联网上发表</p>
<ul>
<li>互联网草案：有效期只有6个月</li>
<li>建议标准：成为RFC文档</li>
<li>互联网标准：每个标准将被分配一个编号STDxxxx，一个标准可以关联多个RFC文档</li>
</ul>
</li>
<li>
<h3 id="互联网的组成"><a class="markdownIt-Anchor" href="#互联网的组成"></a> 互联网的组成</h3>
<ul>
<li>边缘部分：连接在互联网上的<code>主机（端系统）</code>，是用户直接使用的</li>
<li>核心部分：<code>网络</code>和连接这些网络的<code>路由器</code>，为边缘部分提供服务</li>
</ul>
<p>边缘部分与核心部分之间通过<code>接入网AN</code>进行连接</p>
</li>
<li>
<h3 id="端系统主机间的通信"><a class="markdownIt-Anchor" href="#端系统主机间的通信"></a> 端系统（主机）间的通信</h3>
<p>计算机之间的通信的含义：</p>
<p>“主机A和主机B进行通信” 实际上是指：</p>
<p><code>&quot;主机A的某进程和主机B的某进程进行通信&quot;</code></p>
<p>端系统之间的通信方式：</p>
<ul>
<li>客户-服务器方式（C/S）,即Client/Server
<ul>
<li>客户需要知道服务器的地址</li>
<li>服务器不需要知道客户的地址（之所以能准确发送回客户，是因为路由器的作用）</li>
</ul>
</li>
<li>对等方式（P2P），即Peer-to-Peer
<ul>
<li>运行了P2P软件的两个主机，既可以是客户端，也可以是服务端</li>
</ul>
</li>
</ul>
</li>
<li>
<h3 id="通信网络中的交换方式"><a class="markdownIt-Anchor" href="#通信网络中的交换方式"></a> 通信网络中的交换方式</h3>
<ul>
<li>
<p>电路通信：通过<code>电线</code>进行连接，当主机数量增多时，需要<code>电路交换机</code>来完成</p>
<p>两端之间要建立通信，需要抢占链路，直到结束通信前将一直保持连接</p>
<p>电路通信的三个阶段：建立连接——通信——释放连接</p>
<p>电路交换的特点：需要先建立连接，但是数据传输快,适合连续大量的数据传输</p>
<p>电路交换的缺点：通信线路的利用率低，电路交换的用户始终占用端到端的通信资源（比如打开一个网页进行浏览时，将一直保持连接）</p>
</li>
<li>
<p>分组交换：以<code>分组</code>为数据传输单元单位，进行<code>存储转发</code></p>
<p>分组交换的过程：</p>
<ul>
<li>发送端划分报文成数据段，并为数据段添加<code>首部</code>（包含了数据段顺序、目的地址和源地址等<code>控制信息</code>,相当于打tag）</li>
<li>发送端把数据段<code>一段一段地</code>发给<code>结点交换机（路由器）</code></li>
<li>结点交换机根据首部中的目的地址<code>（查找转发表）</code>分组转发给接收端</li>
<li>接受端一段一段地接受数据段，接收完毕后根据首，<code>剥去首部还原报文</code></li>
</ul>
  </br>
<p>分组交换的优点：</p>
<ul>
<li>高效：传送过程中<code>动态传输带宽</code>,对链路是<code>逐段占用</code>的</li>
<li>灵活：可以为每一个分组选择最合适的转发路由</li>
<li>迅速：可以不先建立连接就能发送分组</li>
<li>可靠：由可靠的网络协议</li>
</ul>
<p>分组交换的缺点：</p>
<ul>
<li>转发时需要排队，将造成一定的时间延迟</li>
<li>首部带来的开销</li>
</ul>
<p>相较于电路通信，不需要先抢占链路，只需将分组发送给路由器，分组间的传输均由路由器完成</p>
</li>
</ul>
</li>
<li>
<h3 id="路由器"><a class="markdownIt-Anchor" href="#路由器"></a> 路由器</h3>
<p>路由器之间的输入和输出端口之间<code>没有直接的连线</code></p>
<p>路由器处理分组的过程:</p>
<ul>
<li>把接收到的分组<code>放入缓存</code></li>
<li><code>查找转发表</code>,得到于目的地址对应的端口</li>
<li>根据端口进行转发</li>
</ul>
</li>
<li>
<h3 id="按网络的作用范围进行分类"><a class="markdownIt-Anchor" href="#按网络的作用范围进行分类"></a> 按网络的作用范围进行分类</h3>
<ul>
<li>广域网WAN（Wide Area Network）：作用范围通常为几十到几千公里</li>
<li>城域网MAN（Metropolitan Area Network）：作用范围在5~50公里</li>
<li>局域网LAN（Local Area NetWork）：作用范围在1公里左右</li>
<li>个人局域网PAN（Personal Area Network）：作用范围在10米左右</li>
</ul>
</li>
<li>
<h3 id="计算机网络性能指标"><a class="markdownIt-Anchor" href="#计算机网络性能指标"></a> 计算机网络性能指标</h3>
<ul>
<li>速率:单位时间内数据的传送量，单位：bit/s</li>
<li>带宽：单位时间内某信道所能通过的<code>最高速据率</code>,单位：bit/s</li>
<li>吞吐量：单位时间内通过某个网络（信道、接口）的数据量，单位：bit</li>
<li>时延：数据从一端送到另一端所需的时间</li>
<li>时延带宽积：传播时延 × 带宽</li>
<li>往返时间RTT：从发送端发送数据到发送端收到接收方的确认，总共经历的时间</li>
<li>利用率：信道利用率和网络利用率</li>
</ul>
</li>
<li>
<h3 id="时延"><a class="markdownIt-Anchor" href="#时延"></a> 时延</h3>
<p>时延指数据从网络的一端发送到另一端所需的时间</p>
<ul>
<li>
<p>发送时延(传输时延)：<br />
指主机或路由器发送数据所需的时间</p>
发送时延 = \frac{数据帧长度(bit)}{发送速率(bit/s)}

</li>
<li>
<p>传播时延:</p>
<p>指电磁波在信道中传播一定距离所需的时间</p>
传播时延 = \frac{信道长度(m)}{电磁波在信道上的传播速率(m/s)}

</li>
<li>
<p>处理时延:</p>
<p>主机或路由器收到分组后进行处理所花费的时间</p>
</li>
<li>
<p>排队时延:</p>
<p>分组进入路由器后进入队列进行排队等待处理的时间</p>
</li>
</ul>
总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延

</li>
<li>
<h3 id="网络协议和网络层次"><a class="markdownIt-Anchor" href="#网络协议和网络层次"></a> 网络协议和网络层次</h3>
<ul>
<li>
<p>网络协议：为了进行网络中数据交换而建立的规则（数据应该用什么语法、应该发送什么控制信息、应该怎么对信息进行响应、响应事件的顺序应该是什么样等）</p>
<p>网络协议的组成要素：</p>
<ul>
<li>语法：数据与控制信息的格式</li>
<li>语义：需要发出何种控制信息，完成何种动作和响应</li>
<li>同步：事件实现顺序的详细说明</li>
</ul>
<p>五层协议体系结构的网络层次划分：</p>
<ul>
<li>应用层：提供各种网络应用服务（FTP、SMTP、HTTP）</li>
<li>运输层：负责两个主机之间建立连接（TCP、UDP）</li>
<li>网络层：从源到目的地的选路（IP、选路协议（路由器））</li>
<li>链路层：定义了internet与各物理网络之间的网络接口，负责错误重发，流量控制，拥堵控制（PPP、以太网（交换机））</li>
<li>物理层：采集到的数据转换成二进制数据。以及网络采用什么介质。（中继器）</li>
</ul>
<p>ps: 路由器只有物理层、链路层、网络层</p>
</li>
<li>
<p>五层协议体系结构的数据传送过程：</p>
<p><img src="Protocol.png" alt="alt" style="max-width:100%;"  /></p>
<p>主机1：</p>
<ol>
<li>应用数据先传送到应用层，并<code>加上应用层首部</code>，成为应用层PDU（协议数据单元，包括控制信息和用户数据两个部分）</li>
<li>应用层PDU再传送到运输层，<code>加上运输层首部</code>，成为运输层报文</li>
<li>运输层报文再传送到网络层，<code>加上网络层首部</code>，成为IP数据报（或分组）</li>
<li>IP数据报再传送到数据链路层，<code>加上数据链路层首部和尾部</code>，成为数据链路层帧</li>
<li>数据链路层再传送到物理层</li>
<li>物理层把比特流传送到物理媒体</li>
</ol>
<p>主机2：</p>
<ol>
<li>电信号（或光信号）在物理媒体中传送到接收端的物理层</li>
<li>物理层接收到比特率，交给上层数据链路层</li>
<li>数据链路层<code>剥去帧首部和尾部</code>，取出数据部分传给网络层</li>
<li>网络层<code>剥去网络层首部</code>，取出数据部分交给传输层</li>
<li>运输层<code>剥去运输层首部</code>，取出数据部分上交给应用层</li>
<li>应用层<code>剥去应用层首部</code>，取出应用程序数据上交给应用进程</li>
</ol>
</li>
</ul>
</li>
<li>
<h3 id="实体-协议-服务和服务访问点"><a class="markdownIt-Anchor" href="#实体-协议-服务和服务访问点"></a> 实体、协议、服务和服务访问点</h3>
<ul>
<li>
<p>实体(entity)：可以发送或接收信息的硬件或软件进程</p>
</li>
<li>
<p>协议：控制两个对等实体进行通信的规则的集合</p>
</li>
<li>
<p>在协议的控制下，两个对等实体间的通信使得本层能向上一层提供服务</p>
</li>
<li>
<p>要实现本层协议，需要向使用下层所提供的服务</p>
<p>协议和服务的区别：</p>
<ul>
<li>协议是保证能向上层提供服务</li>
<li>本层的服务可见而协议不可见</li>
<li>协议是<code>水平的</code>，协议是控制两个对等实体间的通信规则</li>
<li>服务是<code>垂直的</code>，即服务是由下层向上层通过接口提供的</li>
</ul>
</li>
<li>
<p>服务访问点SAP（Service Access Point）</p>
<p>SAP本质上是一个逻辑接口， 是同一系统相邻两层实体进行交互的地方,上层要使用下层的服务，就需要使用服务访问点</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<h2 id="物理层"><a class="markdownIt-Anchor" href="#物理层"></a> 物理层</h2>
<ul>
<li>
<h3 id="物理层的基本概念"><a class="markdownIt-Anchor" href="#物理层的基本概念"></a> 物理层的基本概念</h3>
<p>物理层注意关注于传送媒体上的传输数据比特流，而不是传输媒体</p>
<p>用于物理层的协议也常称为<code>物理层规程</code></p>
<p>物理层的作用：尽可能地屏蔽掉不同传输媒体和通信手段的差异</p>
<p>物理层的主要任务：确定与传输媒体的接口的一些特性:</p>
<ul>
<li>机械特性：确定接口尺寸形状、引线的数目和排列等</li>
<li>电气特性：确定电压范围</li>
<li>功能特性：确定电平所表示的意义</li>
<li>过程特性：确定工作时各种事件出现的顺序</li>
</ul>
</li>
<li>
<h3 id="数据通信"><a class="markdownIt-Anchor" href="#数据通信"></a> 数据通信</h3>
<ul>
<li>
<p>数据通信系统的模型<br />
包括源系统、传输系统、目的系统</p>
</li>
<li>
<p>一些常用的术语</p>
<ul>
<li>数据（data）：消息的实体</li>
<li>信号（signal）：数据的在物理上的电磁表现</li>
<li>模拟信号（analogous signal）：消息的参数的取值是连续的</li>
<li>数字信号（digital signal）：代表消息的参数的取值是离散的</li>
<li>码元（code）：用n进制来表示某种波形信号（比如某波形是在-10v和+10v变动，那么就可以用一个二进制码元表示-10v和+10v）</li>
</ul>
</li>
<li>
<p>关于信道的一些概念</p>
<ul>
<li>信道：以传输媒质为基础的信号通路</li>
<li>单工通信（单向通信）：只有一个方向的通信</li>
<li>半双工通信（双向交替通信）：双方都可以发送或接收信息，但是不能同时发送或接收消息</li>
<li>全双工通信（双向同时通信）：通信的双方可以同时发送和接收信息</li>
<li>基带信号：未被调制前的信号，是来自信源的信号，被在基带系统中编码成<code>数字信号</code></li>
<li>基带调制（编码）：对基带信号的波形进行变换，变换后仍是基带信号</li>
<li>带通调制：在<code>调制解调器(用于数字信号和模拟信号之间的转换)</code>中利用载波调制到较高的频段，并转换为模拟信号</li>
<li>带通信号：基带信号经过载波调制后的形成的<code>模拟信号</code></li>
</ul>
</li>
<li>
<p>常见的编码方式：</p>
<ul>
<li>不归零制：正电平代表1，负电平代表0</li>
<li>归零制：正脉冲代表1，负脉冲代表0</li>
<li>曼切斯特编码：向上跳变代表0，向下跳变代表1，也可以反过来</li>
<li>差分曼切斯特编码：保持和上一次跳变一致代表0，不一致代表1</li>
</ul>
<p><img src="%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F.png" alt="img" style="max-width:100%;"  /></p>
<p>从信号波形可看出，曼切斯特编码和差分曼切斯特编码产生的信号频率更高，而且具有<code>自同步能力</code>，不归零制则没有</p>
</li>
<li>
<p>基本的带通调制方法</p>
<ul>
<li>调幅（AM）：调节载波振幅</li>
<li>调频（FM）：调节载波频率</li>
<li>调相（PM）：调节载波初始相位</li>
<li>正交振幅调制（QAM）：载波振幅、相位的混合调制</li>
</ul>
</li>
<li>
<p>影响码元在信道上传输速率的因素</p>
<ul>
<li>信道能够通过的频率范围</li>
<li>信噪比</li>
</ul>
</li>
<li>
<p>奈氏准则：提出在理想调节下，能够避免码间串扰（传输速率过快，界限不清楚）的码元传输速率上限值</p>
</li>
<li>
<p>信噪比：信号的平均功率和噪声的平均功率之比</p>
信噪比(dB) = 10 log_{10}\frac{S}{N} (dB)

</li>
<li>
<p>香农公式：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mo>=</mo><mi>W</mi><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo>(</mo><mn>1</mn><mo>+</mo><mfrac><mrow><mi>S</mi></mrow><mrow><mi>N</mi></mrow></mfrac><mo>)</mo><mo>(</mo><mi>b</mi><mi>i</mi><mi>t</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">C = W log_2(1+\frac{S}{N}) (bit/s)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.36033em;"></span><span class="strut bottom" style="height:2.04633em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">+</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">S</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathit">b</span><span class="mord mathit">i</span><span class="mord mathit">t</span><span class="mord mathrm">/</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span></span></p>
<ul>
<li>W：信道的带宽（以 Hz 为单位）</li>
<li>S：信道内所传信号的平均功率</li>
<li>N：信道内部的高斯噪声功率</li>
</ul>
<p>香农公式说明信噪比越大，则信息的极限传输速率就越高</p>
</li>
</ul>
</li>
<li>
<h3 id="物理层下面的传输媒体"><a class="markdownIt-Anchor" href="#物理层下面的传输媒体"></a> 物理层下面的传输媒体</h3>
<p>传输媒体一般传输的是数字信号</p>
<ul>
<li>导引型传输媒体
<ul>
<li>双绞线：最常用，支持模拟传输和数字传输</li>
<li>同轴电缆：抗干扰强、传输效率高</li>
<li>光纤（光缆）：传输带宽大、耗损小</li>
</ul>
</li>
<li>非导引型传输媒体
<ul>
<li>短波：靠电离层反射，可以向所有方向传播，通信质量差、传播效率低</li>
<li>微波：只能直线传播，数据率高</li>
<li>红外线、激光：只能直线传播，需要进行信号转换</li>
</ul>
</li>
</ul>
</li>
<li>
<h3 id="信道复用技术"><a class="markdownIt-Anchor" href="#信道复用技术"></a> 信道复用技术</h3>
<p>所谓复用，是指允许用户共享一个信道进行通信</p>
<ul>
<li>频分复用：带宽分为多份，每个子信道传输一路信号，用户在同样的时间占用不同的带宽资源</li>
<li>时分复用：将时间划分为一段段等长的时分复用帧，每一个用户所占用的时隙是周期性地出现</li>
<li>统计时分复用：帧不是固定分配时隙，而是按需动态地分配时隙</li>
<li>波分复用：利用多个激光器在单条光纤上同时发送多束不同波长的激光，使用一根光纤来同时传输多个光载波信号。</li>
<li>码分复用：每个用户可以在同样的时间使用同样的频带进行通信</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<h2 id="数据链路层"><a class="markdownIt-Anchor" href="#数据链路层"></a> 数据链路层</h2>
<p>链路是一条无源点到点的物理线段，中间没有其他可交换的节点，数据链路层传输的基本单位是帧(数据+首部+尾部)</p>
<p>首部和尾部的重要作用就是帧定界（规定IP数据报的大小，即小于等于MTU）</p>
<p>物理链路：通常上指的链路</p>
<p>逻辑链路：物理链路 + 通信协议</p>
<p>数据链路层的主要功能：</p>
<ol>
<li>帧同步</li>
<li>差错控制</li>
<li>流量控制</li>
<li>链路管理</li>
<li>MAC寻址</li>
</ol>
<ul>
<li>
<h3 id="数据链路层存在的三种问题"><a class="markdownIt-Anchor" href="#数据链路层存在的三种问题"></a> 数据链路层存在的三种问题</h3>
<ul>
<li>封装成帧（加入首尾部）</li>
<li>透明传输（服务透明）</li>
<li>差错控制（判断帧是否正确，正确则剥去首尾部，错误则丢弃）</li>
</ul>
</li>
<li>
<h3 id="字节字符填充"><a class="markdownIt-Anchor" href="#字节字符填充"></a> 字节（字符）填充</h3>
<p>SOH|帧中间的数据部分|EOT<br />
-----|-----|-----<br />
| |</p>
<p>SOH、EOT被叫做帧定界符分别表示从首部开始到尾部结束，但是SOH和EOT并不能准确得帧定界（比如数据部分插入了SOH或EOT，这将导致数据的丢失），因此需要进行<code>字符填充（字节填充）</code>：在数据段中出现的SOH或EOT前面插入一个转义字符<code>ESC</code>。</p>
<table>
<thead>
<tr>
<th>数据段</th>
<th>ESC</th>
<th>EOT</th>
<th>数据段</th>
<th>EOT</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</li>
<li>
<h3 id="比特填充零比特填充"><a class="markdownIt-Anchor" href="#比特填充零比特填充"></a> 比特填充（零比特填充）</h3>
<p>为了避免在传送的数据信息中心出现相同比特组合被误认为是帧的首、尾标志，必须对其进行<code>比特填充</code>，具体做法是：</p>
<p>数据比特流中出现5个连续“1”的时候，它就自动在输出比特流中插入一个“0”。</p>
<p>比如：</p>
</li>
</ul>
<p><code>01111110</code>进行比特填充后：<code>011111010</code></p>
<ul>
<li>
<h3 id="差错检测"><a class="markdownIt-Anchor" href="#差错检测"></a> 差错检测</h3>
<p>传输过程中可能会产生<code>比特差错</code>，比如1变成0或0变成了1，因此必须采取各种的检错措施：循环冗余检验(CRC)、奇偶校验、因特网校验等。通过检测的数据报将被保留，否则将丢弃</p>
<p>CRC能检测出多位突发性差错，但不能进行纠正</p>
<p>因为CRC只能做到“无差错传输”而不能做到<code>可靠传输</code>(即发送什么就收到什么)，当出现帧丢失、帧重复、帧乱序的情况，链路层只能保证0不会传成1，1不会传成0，因此需要在<code>传输层</code>进行可靠传输：自动重传请求(ARQ协议)、流水线协议(连续ARQ协议)</p>
</li>
<li>
<h3 id="冗余码计算"><a class="markdownIt-Anchor" href="#冗余码计算"></a> 冗余码计算</h3>
<p>通过CRC校验（不是唯一获得冗余码方法），可得到一个字段：<code>帧检验序列FCS（冗余码）</code>，通过FCS字段判断接收帧的网卡或接口是否发生了错误。</p>
<p>已知多项式为 P(x)=x3+x2+1，信息码为101001，求冗余码FCS</p>
<p>其中用到了<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%A8%A12%E8%BF%90%E7%AE%97/18556715?fr=aladdin">模2运算法则</a></p>
<pre class="highlight"><code class="">多项式最高项为3，因此在信息码后补3个0得到被除数：101001000

根据多项式可获得除数（x次项系数是0则写0，否则写1）：

3次项的系数是1，因此：1
2次项的系数是1，因此：11
1次项的系数是0，因此：110
0次项的系数是1，因此：1101

所以除数为1101

对 101001000 和 1101 进行 模2除法 得：

商为110101，余数为001
冗余码FCS即为余数：001
</code></pre>
</li>
<li>
<h3 id="ppp协议点对点协议"><a class="markdownIt-Anchor" href="#ppp协议点对点协议"></a> PPP协议(点对点协议)</h3>
<p>PPP支持在多种物理类型的点对点串行线路上传输上层协议报文，用户和ISP进行通信时所使用的数据链路层协议就是PPP协议</p>
<p>PPP协议的特点：</p>
<ul>
<li>简单（只进行点对点数据传输，不进行帧纠错、流量控制）</li>
<li>封装成帧</li>
<li>透明（异步时字符填充法，同步时比特填充）</li>
<li>多层网络层协议（一条链路上支持多种网络协议同时允许）</li>
<li>多种链路类型（串行、并行链路等）</li>
<li>差错检测</li>
<li>检测连接状态</li>
</ul>
<p>PPP协议的组成部分：</p>
<ol>
<li>一个将 IP 数据报封装到串行链路的方法</li>
<li>链路控制协议LCP</li>
<li>网络控制协议NCP</li>
</ol>
<p>可见PPP协议不只是存粹的数据链路层协议，还包含了物理层和网络层的内容</p>
<p>PPP协议是面向字节的，所有PPP帧的长度都是整数字节</p>
</li>
<li>
<h3 id="局域网的数据链路层"><a class="markdownIt-Anchor" href="#局域网的数据链路层"></a> 局域网的数据链路层</h3>
<ul>
<li>以太网<br />
以太网是指符合以太网标准的<code>局域网</code></li>
</ul>
<p>以太网一般有两个标准：DIX EthernetV2（严格意义上的局域网标准）、IEEE 802.3</p>
<ul>
<li>
<p>数据链路层的两个子层</p>
<p>IEEE802委员会将数据链路层拆分成两个子层</p>
<ul>
<li>
<p>LLC层：逻辑链路控制层</p>
</li>
<li>
<p>MAC层：媒体接入控制层</p>
</li>
</ul>
<p>MAC与接入到媒体有关的内容相关，而LLC对于它下面的局域网是透明的</p>
<p>由于TCP/IP协议通常采用DIX EthernetV2标准，因此一般不会采用IEEE802协会制定的LLC层，一般厂商生产的<code>适配器</code>上只会有MAC协议</p>
</li>
<li>
<p>网卡（NIC）</p>
<p>网卡（Network Interface Card，简称NIC），也被叫做<code>网络适配器</code>，是连接到局域网的必要硬件，网卡包含了物理层和数据链路层，并且实现了以太网协议。</p>
<p>网卡的功能：</p>
<ol>
<li>将本机数据封装成帧，并发送到局域网上</li>
<li>接收网络上其他设备发送的帧，解析后发送到本机上</li>
</ol>
</li>
<li>
<p>以太网的发送数据信号的方式：广播</p>
<p>以太网通过广播的方式实现一对一通信：</p>
<ol>
<li>
<p>总线上的任意一个计算机都能检测A计算机发送的数据帧</p>
</li>
<li>
<p>但是只有B的地址与A发送的数据帧的首部一致</p>
</li>
<li>
<p>因此只有B能接收到A发送的消息，而其他计算机不能</p>
</li>
</ol>
</li>
<li>
<p>CSMA/CD协议</p>
<p>CSMA/CD 含义：载波监听多点接入 / 碰撞检测</p>
<ul>
<li>
<p><code>多点接入</code>表示许多计算机以多点接入的方式连接在一根总线上</p>
</li>
<li>
<p><code>载波监听</code>表示在发送数据之前先检测总线上有没有其他计算机在发送数据，如果有则暂时不发送，等一段随机事件后再发送</p>
</li>
<li>
<p><code>碰撞检测</code>就是计算机边发送数据边检测信道上的信号电压大小。。当几个站同时在总线上发送数据时，总线上的信号电压摆动值将会增大(互相叠加)。</p>
</li>
</ul>
<p>当一个站检测到的信号电压摆动值超过一定的门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了<code>碰撞</code>，碰撞的结果是两个帧都变得无用。</p>
<p>之所以要进行碰撞检测，是因为载波监听无法判断总线是否是&quot;真正的空闲&quot;：有可能总线上没有信号在传输，也有可能是主机已经发送数据完毕但是信号仍在总线上传输</p>
<p>PS：采用CSMA/CD协议的以太网只能进行<code>双向交替通信（半双工通信）</code>，即可以发送或接收消息，但是不能同时发送或接收消息</p>
<p>以太网规定了<code>最短有效帧</code>长为 64 字节，也就是说如果小于64字节的帧都是无效帧，比如发生了碰撞后立即停止发送，那么发送出去的数据帧必然小于64个字节</p>
</li>
<li>
<p>使用集线器的星形拓扑</p>
</li>
</ul>
<p>采用双绞线的以太网采用星形拓扑，并且在中心添加了一个<code>集线器(hub)</code></p>
<p>集线器工作在<code>物理层</code>，使用集线器的以太网在逻辑上仍然是<code>一条总线</code>，通过集线器可以模拟实际电缆线的工作，因此整个系统仍然像一个传统的以太网那样运行（工作站还是用的CSMA/CD协议）</p>
<ul>
<li>
<p>星型以太网 10Base-T Ethernet</p>
<p>IEEE 制定出星形以太网 10Base-T的标准 802.3i，10Base-T是Ethernet局域网的一种配置。</p>
<p>其中：</p>
<ul>
<li>10：指传输速率为10Mb/s</li>
<li>Base：指的是基带传输</li>
<li>T：指采用双绞线</li>
</ul>
</li>
<li>
<p>以太网的信道利用率</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>=</mo><mfrac><mrow><msub><mi>T</mi><mn>0</mn></msub></mrow><mrow><msub><mi>T</mi><mn>0</mn></msub><mo>+</mo><mi>τ</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">S = \frac{T_0}{T_0+\tau}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.36033em;"></span><span class="strut bottom" style="height:2.19633em;vertical-align:-0.8360000000000001em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">0</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.1132em;">τ</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">0</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p>
<p>其中：</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">S</span></span></span></span>为信道利用率</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">T_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">0</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>为帧发送时间，其中<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">L</span></span></span></span>为帧长，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07153em;">C</span></span></span></span>为发送速率(数据率)单位可以是 bps 或 bit/s</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi><mn>0</mn><mo>=</mo><mfrac><mrow><mi>L</mi><mo>(</mo><mi>b</mi><mi>i</mi><mi>t</mi><mo>)</mo></mrow><mrow><mi>C</mi><mo>(</mo><mi>b</mi><mi>p</mi><mi>s</mi><mo>)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">T0 = \frac{L(bit)}{C(bps)}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.427em;"></span><span class="strut bottom" style="height:2.363em;vertical-align:-0.936em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathrm">0</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathit">b</span><span class="mord mathit">p</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">L</span><span class="mopen">(</span><span class="mord mathit">b</span><span class="mord mathit">i</span><span class="mord mathit">t</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>τ</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.1132em;">τ</span></span></span></span>为比特在媒体上传输到另一端所需的时间，因此<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub><mo>+</mo><mi>τ</mi></mrow><annotation encoding="application/x-tex">T_0 + \tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">0</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.1132em;">τ</span></span></span></span>表示发送一帧占用线路的时间</p>
</li>
<li>
<p>MAC层</p>
<p>在局域中硬件地址一般被称为物理地址或MAC地址（严格来说不是地址而是一个48位的标识符）</p>
<p>MAC地址实际上就是适配器地址或适配器标识符 EUI-48</p>
<p>适配器每从网络上受到一个MAC帧，就首先用硬件检测MAC帧中的MAC地址，发往本站的帧则收下，否则丢弃该帧</p>
<p>IEEE802标准规定MAC地址字段可采用6字节（48位）或2字节（16位）</p>
<p>当采用48位的MAC地址时，其MAC地址结构为：</p>
<p>24bit|24bit<br />
-----|-----<br />
组织唯一标识符|扩展唯一标识符</p>
</br>
<p>IEEE 把地址字段第一字节的最低第 2 位规定为 G/L位，表示 Global/Local。</p>
<ul>
<li>当 G/L位 = 0 时，是全球管理（保证在全球没有相同的地址），厂商向IEEE购买的 OUI 都属于全球管理。</li>
<li>当 G/L位 = 1 时， 是本地管理，这时用户可任意分配网络上的地址。</li>
</ul>
</li>
<li>
<p>MAC帧格式</p>
<p>以太网 MAC 帧格式一般有两种标准：</p>
<ul>
<li>DIX Ethernet V2 标准</li>
<li>IEEE 的 802.3 标准</li>
</ul>
<p>最常用的 MAC 帧是以太网 V2 的格式:</p>
<table>
<thead>
<tr>
<th>6bit</th>
<th>2bit</th>
<th>45-1500bit</th>
<th>4bit</th>
</tr>
</thead>
<tbody>
<tr>
<td>源地址</td>
<td>类型</td>
<td>数据</td>
<td>FCS</td>
</tr>
</tbody>
</table>
<p>其中类型字段用来标志上一层使用的是什么协议，以便把收到的 MAC 帧的数据上交给上一层的这个协议。数据字段的正式名称是 <code>MAC客户数据字段</code>，最小长度 64 字节 − 18 字节的首部和尾部 = 数据字段的最小长度（46字节）</p>
</li>
<li>
<p>扩展以太网的方法：</p>
<ul>
<li>
<p>在物理层上：</p>
<ul>
<li>使用光纤拓展</li>
<li>使用集线器（hub）拓展</li>
<li>在数据链路层扩展：</li>
<li>使用网桥</li>
<li>使用交换机</li>
</ul>
</li>
<li>
<p>以太网交换机：</p>
<ul>
<li>交换机的<code>接口</code>内置了存储器，可以对帧进行缓存</li>
<li>在内部维护了一张<code>交换表</code>（地址表），并通过<code>自学习算法</code>对其维护</li>
<li>采用<code>硬件转发</code>，转发效率比网桥的软件转发效率高</li>
</ul>
</li>
</ul>
<p>通过交换机用户可以独享带宽，并且有多种速率的接口</p>
</li>
<li>
<p>以太网交换机的交换方式</p>
<ul>
<li>存储转发：<br />
先缓存数据帧再进行处理</li>
<li>直通方式：<br />
接收数据帧的同时，立即按数据帧的<code>目的MAC地址</code>决定该帧的转发接口</li>
</ul>
</li>
<li>
<p>交换机的自学习算法</p>
<p>交换机中的表其实类似一个键值对的形式：键是MAC地址，值是接口和该帧的有效时间</p>
<p>交换机自学习流程是：</p>
<ol>
<li>交换机收到帧检查交换表（检查该<code>帧的目的地址</code>是否与<code>表中的MAC地址中的源地址</code>有匹配）</li>
<li>如果表中存在记录，则向该MAC地址所对应的接口<code>单播</code>该帧</li>
<li>如果表中不存在记录，则向所有接口<code>广播</code>该帧</li>
</ol>
<p>举个连接同一个交换机的主机A和B交换数据的栗子：</p>
<p>主机A向主机B发送数据帧：</p>
<ul>
<li>一开始表是空的</li>
<li>A向B发送一帧从<code>接口1</code>进入到交换机</li>
<li>交换机收到帧后，查找交换表，但是找不到应该从哪个口转发这个帧</li>
<li>交换机将A的<code>MAC地址</code>和<code>接口1</code>写入表中</li>
<li>因为没有找到转发接口，所以交换机向除了接口1以外的接口广播该帧</li>
<li>接口234分别把帧发送给主机BCD</li>
<li>主机BCD检查该帧的目的地址，其中CD发现目的地址不对，因此丢弃该帧，而B将收下该帧</li>
</ul>
<p>收到帧的B又向A发送一帧：</p>
<ul>
<li>B向A发送一帧从<code>接口3</code>进入到交换机</li>
<li>交换机检查表发现有A的记录，因此直接通过接口1发给A，不需要再广播收到的帧</li>
</ul>
<p><img src="%E8%87%AA%E5%AD%A6%E4%B9%A0.png" alt="img" style="max-width:100%;"  /></p>
<ul>
<li>交换机的生成树协议STP</li>
</ul>
<p>自学习的过程可能会导致以太网帧在网络的某个环路中无限地兜圈子，白白浪费了网络资源</p>
<p><img src="%E8%87%AA%E5%AD%A6%E4%B9%A0%E6%97%B6%E7%9A%84%E6%AD%BB%E5%BE%AA%E7%8E%AF.png" alt="img" style="max-width:100%;"  /></p>
<p>为了解决这一问题，IEEE 802.1D 标准制定了一个生成树协议 STP，不改变网络的拓扑结构，但在逻辑上则切断某些链路，使得从一台主机到所有其他主机的路径是无环路的树状结构，从而消除了兜圈子现象</p>
<ul>
<li>虚拟局域网VLAN</li>
</ul>
<p>虚拟局域网（VLAN）就是不改变原网络的拓扑结构，而是根据需要灵活地加入不同的逻辑子网（由一些局域网网段组成）的一种技术</p>
<p>注意：虚拟局域网本质上是一种提供给用户的服务，而不是真正意义上的局域网</p>
<ul>
<li>VLAN的帧格式</li>
</ul>
<p>VLAN协议允许在以太网帧中插入一个4字节的标识符，称为<code>VLAN标记(tag)</code>，用来指明发送这个帧的计算机是属于哪一个 VLAN。</p>
<p>插入tag的VLAN帧被称为<code>802.1Q帧（或带标记的以太网帧）</code></p>
<p>帧格式为：</p>
<table>
<thead>
<tr>
<th>bit</th>
<th>4bit</th>
<th>2bit</th>
<th>45~1500bit</th>
<th>4bit</th>
</tr>
</thead>
<tbody>
<tr>
<td>源地址</td>
<td>tag</td>
<td>类型</td>
<td>数据</td>
<td>FCS</td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr />
<ul>
<li>
<h2 id="网络层"><a class="markdownIt-Anchor" href="#网络层"></a> 网络层</h2>
<ul>
<li>
<h3 id="两种观点"><a class="markdownIt-Anchor" href="#两种观点"></a> 两种观点</h3>
<ul>
<li>网络层应该是面向连接的，并且提供可靠传输<br />
所谓面向连接就是提前建立虚电路（逻辑电路，与电路交换中的电话通信不同，不是真正的建立物理连接，只是预先规划好路线并不是实际的占用）</li>
<li>（主流）网络层应该是无连接，并且不提供可靠传输</li>
</ul>
</li>
<li>
<h3 id="两种服务"><a class="markdownIt-Anchor" href="#两种服务"></a> 两种服务</h3>
<p>分组交换的两种实现方式：</p>
<table>
<thead>
<tr>
<th>虚电路服务</th>
<th>数据报服务</th>
</tr>
</thead>
<tbody>
<tr>
<td>接的建立</td>
<td>需要</td>
</tr>
<tr>
<td>址与源地址的携带</td>
<td>不需要</td>
</tr>
<tr>
<td>选择</td>
<td>所有分组选择同一路由</td>
</tr>
<tr>
<td>故障时</td>
<td>虚电路罢工</td>
</tr>
<tr>
<td>顺序</td>
<td>按发送顺序到达目的站点</td>
</tr>
<tr>
<td>的差错控制和流量控制</td>
<td>可以由网络或主机负责</td>
</tr>
<tr>
<td>层的实现</td>
<td>TCP</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>不同网络互连的中间设备</p>
<ul>
<li>物理层中继系统：转发器</li>
<li>数据链路层中继系统：网桥</li>
<li>网络层中继系统：路由器</li>
<li>网桥+路由器：桥路器</li>
<li>网络层以上中继系统：网关</li>
</ul>
</li>
<li>
<h3 id="ip协议"><a class="markdownIt-Anchor" href="#ip协议"></a> IP协议</h3>
</li>
</ul>
IP协议提供了无连接、不可靠传输的传输功能，确保了联网设备的唯一性
<ul>
<li>
<p>IP地址</p>
<p>IP地址就是在全球范围内分配给每一个连接上互联网的主机的一个唯一的32位标识符</p>
<p>IP地址被分为2个字段，其中一个字段为<code>网络号net-id</code>，用来标志连接到网络的主机；另外一个字段为<code>主机号host-id</code>，用来标志该主机或路由器。主机号所在的网络范围内是<code>唯一</code>的，因此IP地址在整个互联网范围内是唯一的</p>
<p>实际上IP地址是标志一个主机（或路由器）和一条链路的接口，IP地址是一种逻辑上的地址</p>
<p>路由器只根据目的站的IP地址的<code>网络号</code>进行路由选择</p>
</li>
<li>
<p>常用的三类ip地址</p>
<table>
<thead>
<tr>
<th>络号</th>
<th>主机号</th>
<th>能表示范围</th>
<th>一般表示含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>1个</td>
<td>后3个</td>
<td>1.0.0.1~126.255.255.254</td>
<td>10.0.0.0<sub>10.255.255.255是私有地址，127.0.0.0</sub>127.255.	255.255是保留地址</td>
</tr>
<tr>
<td>2个</td>
<td>后2个</td>
<td>128.1.0.1~191.255.255.254</td>
<td>172.16.0.0<sub>172.31.255.255是私有地址，169.254.0.0</sub>169.254.255.255是保留地址</td>
</tr>
<tr>
<td>3个</td>
<td>后1个</td>
<td>192.0.1.1~223.255.255.254</td>
<td>192.168.0.0~192.168.255.255是私有地址</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>IP数据报和TCP报文和MAC帧的关系<br />
<img src="%E5%9C%B0%E5%9D%80%E7%9A%84%E5%85%B3%E7%B3%BB.png" alt="img" style="max-width:100%;"  /></p>
</li>
<li>
<p>地址解析协议ARP<br />
该协议的主要作用：通过IP地址能解析出在数据链路层使用的硬件地址;</p>
<p>当主机A向主机B发送IP数据报时，先在ARP高速缓冲中查看是否有B的IP地址；如果有，则将对应的硬件地址写入MAC帧，再通过局域网发往此硬件地址；否则ARP进程在本局域网上广播一个<code>ARP请求分组</code>，分组的主机将得到的IP地址到硬件地址的映射写入ARP告诉缓存中</p>
</li>
<li>
<p>IP数据报格式：<br />
<img src="IP%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F.png" alt="img" style="max-width:100%;"  /></p>
<ul>
<li>版本：IP协议的版本号，目前版本号为4（IPv4），下一个版本号是6（IPv6）</li>
<li>首部长度：字面意思</li>
<li>区分服务：用来获得其他服务，一般不会用到</li>
<li>总长度：数据+首部的长度</li>
<li>标识：会自动累加，用来标识被分片后的数据报后是来自于哪一个数据报</li>
<li>标志：用来表示是否还可分配，只有三位：其中中间一位DF=0时表示可分片，DF=1时表示不可分片；最低位MF=1时表示&quot;后面还有分片&quot;，MF=0时表示&quot;是最后一个分片&quot;</li>
<li>片偏移：表示被分片的分组在原分组中的相对位置</li>
<li>生存时间：根据TTL（Time to live 数据报在网络中可通过的路由器数的最大值）来决定数据报何时销毁：每经过一个路由器时TTL -= 1，当TTL为0时，该数据被丢弃</li>
<li>协议：指出该数据报使用了何种协议</li>
<li>首部检验和：对数据报首部进行差错检验（非CRC）</li>
<li>源地址、目的地址：字面意思</li>
<li>可变部分：用来支持排错、安全检测等措施，目的是增加数据报的成功率</li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
    
    <div class="footer">
    <hr>
        <font> ©2021 </font>
        <a target="_blank" rel="noopener" href="https://github.com/Gatongone/" style="color: rgb(214, 207, 218);">Gatongone</a>
        some copyrights reserved
        <div style="float: right; margin-right: -200px;">
              Apr 6th  2021,  8:05:32  |
            <font>Powered by</font>
            <a target="_blank" rel="noopener" href="https://hexo.io/"  style="color: rgb(214, 207, 218);">Hexo</a>
            framework
        </div>
    </div>
</body>
    



</div>



<script>
     var bar=document.getElementById("top_btn")
     var showtime=0;
     var hidetime=0;
     window.addEventListener("pageshow",function(){
         let scrollTop = window.pageYOffset ||document.documentElement.scrollTop|| document.body.scrollTop || 0;
        if(scrollTop ==0)
        {
            bar.style.display = 'none';
        }
        else
        {
            bar.style.display = 'block';
        }
        window.addEventListener("scroll",function(){
            bar.style.display = 'block';
            scrollTop = window.pageYOffset ||document.documentElement.scrollTop|| document.body.scrollTop || 0;
            if(scrollTop != 0)
            {
                if(hidetime==0)
                {
                    bar.classList.toggle("top_btn_show");
                    hidetime++;
                }
                showtime=0;
            }  
            else
            {
                if(showtime==0 && hidetime!=0)
                {
                    bar.classList.toggle("top_btn_show");
                    showtime++;
                    hidetime=0;
                }
            }
        }) 
     })
     
    var timer = null;
    bar.onclick = function()
    {
        cancelAnimationFrame(timer);
        timer = requestAnimationFrame(function fn()
        {
            var top = document.body.scrollTop || document.documentElement.scrollTop;
            if(top > 0)
            {
                document.body.scrollTop = document.documentElement.scrollTop = top - 80;
                timer = requestAnimationFrame(fn);
            }
            else
            {
                cancelAnimationFrame(timer);
            } 
        });
    }
         
</script>


<script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>

<script src="/blog/js/showpost.js"></script>

<script>
    hljs.initHighlightingOnLoad();
</script>


</body>                                             <!--  加载主体  -->

        </div>                                                                 
        
<script src="/blog/js/searchbar.js"></script>
<script src="/blog/js/hidebar.js"></script>
              <!--    加载JS  -->                                                          
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>

</html>